{% extends 'base.html' %}
{% load static %}

{% block content %}
<title>{% block title %}Customer{% endblock %}</title>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>orders</title>
  <style>
  *{
    font-family: Georgia;
   }
   .modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 50px;
  border: 1px solid #888;
  width: 50%; 
  max-width: 750px;
}


.select-style{
    border-radius: 0.25rem;
    border-color: black;
  }
  .form-control{
    border-radius: 0.25rem;
    border-color: black;
    padding-left:10%;
  }
  .title h3{
  
  border-bottom: 2px solid blueviolet ;
  display: inline-block;
   color: #000;
  font-weight: bold;
}
.title h5{

  display: inline-block;
   
}

</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>
<div class="page-wrapper">
    <div class="page-content">
        <div class="page-breadcrumb  mb-3">
            <div class="breadcrumb-title pe-3">Printing Form Info</div>
            <hr>
            <div class="d-grid gap-2  justify-content-md-end" style="margin-right: 50px;">
                <button class="btn btn-primary me-md-2" id="myBtn"  type="button" style="background-color: mediumaquamarine;"><i class="fa fa-plus" ></i>&nbsp;Printing Form</button>
            </div>
            <div id="myModal" class="modal">
                <div class="modal-content" style="background-color:lightcyan;">  
                  <span class="close text-end mb-2" onclick="this.parentNode.style.display = 'none'; return false;" style="float: right; font-size: 20px; color:#00569d; cursor: pointer;">âœ•</span> 

                    <div class="panel panel-default">
                      
                        <h4 style="background-color :mediumaquamarine; color:white; text-align: center;">Create Printing Form</h4>
                          
                         <br>
                        <form method="POST" onsubmit="return myfun()">
                            {% csrf_token %}
                            <div class="panel-body" >
                                <div class="" >
                                    <!-- <div class="title">
                                        <h4 style="margin-left:205px;">Winwings Publications</h4><br><br>
                                        <h5 style="color: rgb(90, 88, 88); font-size:17px;"><b>Address:</b> 780,Gulgulwar Niwas,Golibar Chowk,<br>Nagpur-440002</h5>
                                    </div> -->
                                    <div class="row" style="text-align: right;">
                                        <div class="col-md-8"></div>
                                        <div class="col-md-4">
                                            <div class="form-group" >
                                                <div class="input-group">
                                                    <input type="date" class="form-control mobile" name="form_date" id="date" placeholder="{% now 'd-m-Y' %}" disabled  max="{% now 'd-m-Y' %}" />
                                                </div>
                                            </div>
                                        </div>
                                    </div> <br>  
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="d-grid gap-2 col-sm-6">
                                                <div class="mb-3">
                                                <label for="name" class="control-label">Name<span style="color:red;">*</span></label>
                                                   <select class="form-control" name="form_vender" id="form_vender" style="width:100%;" required>
                                                    <option disabled selected value>Select Vendor</option>
                                                    {% for i in obj4 %}
                                                        <option value="{{i.organization_name}}">{{i.organization_name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>                                    
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Code<span style="color:red;">*</span></label>
                                                <input class="form-control" id="code" name="form_code" required onselect="calculateFormsPerSet()"> 
                                             </div>
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Brand<span style="color:red;">*</span></label>
                                                <input class="form-control" id="brand_name_1" name="form_brand" required onselect="calculateFormsPerSet()">
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Class<span style="color:red;">*</span></label>
                                                <input class="form-control" id="class_name_1" name="form_class" required>
                                                </div>
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Medium<span style="color:red;">*</span></label>
                                                <input class="form-control" id="medium_1" name="form_medium" required>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Subject<span style="color:red;">*</span></label>
                                                <input class="form-control" id="subject_1" name="form_subject" required>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2 col-sm-6">
                                            <div class="mb-3">
                                                <label>Pages<span style="color:red;">*</span></label>
                                                <input class="form-control" id="pages_1" name="form_pages" required onselect="calculateFormsPerSet()">

                                            </div>
                                        </div>
                                    </div>
                                       




                                    
                                    
                                    <!-- <div class="col-md-12" style=""> -->
                                        <div class="" style="">
                                            <div class="">
                                                <div class="" style="">
                                                    <div class="row" id="myDiv" style=""> 
                                                        
                                                        
                                                       
                                                        
                                                        <!-- <div class="form-group row"> -->
                                                        {% comment %} <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Single<span style="color:red;">*</span></label>
                                                                <input class="form-control" id="single_1" name="p_single_1" required data-depends-on-brand="" data-depends-on-class="" data-depends-on-medium="" data-depends-on-subject="" data-depends-on-pages="">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>Double<span style="color:red;">*</span></label>
                                                                <input class="form-control" id="double_1"  name="p_double_1" required data-depends-on-brand="" data-depends-on-class="" data-depends-on-medium="" data-depends-on-subject="" data-depends-on-pages="">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="form-group">
                                                                <label>four<span style="color:red;">*</span></label>
                                                                <input class="form-control" id="four_1" name="p_four_1" required data-depends-on-brand="" data-depends-on-class="" data-depends-on-medium="" data-depends-on-subject="" data-depends-on-pages="">
                                                            </div>
                                                        </div> {% endcomment %}
                                                        
                                                           
                                                            </div>

                                                             <div class="row">
                                        
                                                            <div class="row">
                                                                <div id="dynamicInputBoxes" class="col-md-12"> 
                                                                        <!-- Additional boxes will be added here dynamically -->
                                                                </div>
                                                            </div>
                                                            
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                        
                                          <div class="col-md-12" style="text-align: right;">
                                          {% comment %} <button class="btn btn-primary btn-sm add_more_button" >Add New Items</button> {% endcomment %}
                                          </div>
                                      </div>

                                        
                                        <div class="col-md-12" >
                                            <div class="form-group">
                                                <label style="padding-right:100%;">Note</label>
                                                <input type="text" class="form-control mobile" name="term_and_condition1" maxlength="60" 
                                                id="term_and_condition1" placeholder="1. Terms and Conditions" value="{{first_condition}}" style="border-bottom: 1px solid rgb(214, 213, 213);
                                                border-left:none ; border-top: none; border-right: none; margin-bottom: 13px;"/>
                                            </div>
                                        </div>
                                        <div class="col-md-8 text-center"></div>
                                        <div class="col-md-12" style="text-align: center;">
                                          <div class="text-center mt-3 mb-3">
                                              <button type="submit" class="btn btn-primary" name="create_form_btn" value="save_cashmemo_btn" style="background-color:mediumaquamarine;">Create</button>
                                              <!-- <button type="button" class="btn btn-primary close" data-dismiss="modal" style="background-color:mediumaquamarine;">Close</button> -->
                                         <!-- <button class="btn btn-primary" style="background-color:mediumaquamarine ; "><a href="{{ form.get_cancel_link }}" style="color:white; text-decoration: none;" >Back</a> -->
                                         </button>
                                         
                                          </div></div>
                                      
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="card-body" >
                <div class="row" style="text-align: center;" >
                    <div class="col-md-12" >
                        <div class="table-responsive">
                            <table  class="display table table-hover table-striped table-bordered" >
                                <thead>
                                    <tr style="text-align: center; background-color: lightcyan;">
                                        <th align="center">Sr.No</th>
                                        <th align="center">Book Code</th>
                                        <th align="center">Vendor</th>
                                        <th align="center">Brand</th>
                                        <th align="center">Class</th>
                                        <th align="center">Medium</th>
                                        <th align="center">Subject</th>
                                        
                                        {% comment %} <th align="center">Form 1-32</th>
                                        <th align="center">Form 33-64</th>
                                        <th align="center">Form 65-96</th>
                                        <th align="center">Form 97-128</th>
                                        <th align="center">Form 129-160</th>
                                        <th align="center">Form 161-192</th>
                                        <th align="center">Form 193-224</th>
                                        <th align="center">Form 225-256</th>
                                        <th align="center">Form 257-288</th>
                                        <th align="center">Form 289-320</th> {% endcomment %}
                                        <th align="center">Total Form</th>
                                        {% comment %} <th align="center">Total Transferred</th>
                                        <th align="center">Total Pending</th> {% endcomment %}
                                        <th align="center">Print Date</th>
                                        <!-- <th align="center">Total Quantity</th>
                                        <th align="centre">Total Forms</th> -->
                                        <th align="center">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in obj3 %}
                                    <tr >
                                        <td >{{ forloop.counter }}</td> 
                                        <td>{{i.form_code}}</td>
                                        <td>{{i.form_vender}}</td>
                                        <td >{{i.form_brand}}</td>
                                        <td>{{i.form_class}}</td>
                                        <td>{{i.form_medium}}</td>
                                        <td>{{i.form_subject}}</td>
                                            
                                        {% comment %} <td>{{i.p_printing_received_form_1}}</td>   
                                        <td>{{i.p_printing_received_form_2}}</td> 
                                        <td>{{i.p_printing_received_form_3}}</td> 
                                        <td>{{i.p_printing_received_form_4}}</td>   
                                        <td>{{i.p_printing_received_form_5}}</td>   
                                        <td>{{i.p_printing_received_form_6}}</td> 
                                        <td>{{i.p_printing_received_form_7}}</td> 
                                        <td>{{i.p_printing_received_form_8}}</td> 
                                        <td>{{i.p_printing_received_form_9}}</td>   
                                        <td>{{i.p_printing_received_form_10}}</td>   {% endcomment %}
                                        <td>{{i.total_forms}}</td> 
                                        {% comment %} <td >{{i.transfer}}</td> 
                                        <td >{{i.transfer_pending}}</td>  {% endcomment %}
                                        <td >{{i.form_date}}</td>                                                                                             
                                        <td>                                          
                                           <div>
                                                {% comment %} <!-- <a href="/print_view/{{i.id}}"><i class="bi bi-eye"></i></a> -->
                                                <a href="/form_view/{{i.id}}"><img width="16" height="16" src="https://img.icons8.com/office/16/data-in-both-directions.png" alt="data-in-both-directions"/></a>
                                                 {% endcomment %}
                                                {% comment %} {% if i.print_approved_1 %}
                                                    <!-- Print is approved, hide the edit and delete buttons -->
                                                    
                                                {% else %} {% endcomment %}
                                                    <a href="/edit_form_printing/{{i.id}}/" id="editButton"><i class="bi bi-pencil-square"></i></a>
                                                    <a href="/delete_form/{{i.id}}/" id="deleteButton"><i class="bi bi-archive"></i></a>
                                                {% comment %} {% endif %} {% endcomment %}
                                            </div>
                                        </td>
                                    </tr>
                                  {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>


            <script>
                // JavaScript code to handle dropdown and input box dependencies
            
                // Get references to the dropdown elements
                const codeDropdown = document.getElementById('code');
                const brandDropdown = document.getElementById('brand_name_1');
                const classDropdown = document.getElementById('class_name_1');
                const mediumDropdown = document.getElementById('medium_1');
                const subjectDropdown = document.getElementById('subject_1');
                const pagesDropdown = document.getElementById('pages_1');
                const dynamicInputBoxes = document.getElementById('dynamicInputBoxes');
            
                // Create a dictionary to store the book data
                const bookData = {
                    // Populate this object with book data from your backend
                    {% for i in obj2 %}
                    "{{ i.code }}": {
                        brand: "{{ i.books_name }}",
                        class: "{{ i.books_class }}",
                        medium: "{{ i.medium }}",
                        subject: "{{ i.subject }}",
                        pages: "{{ i.no_of_pages }}",
                    },
                    {% endfor %}
                };
            
                // Function to update input boxes based on "pages_1" value
                function updateInputBoxes() {
                    const selectedCode = codeDropdown.value;
                    const pagesValue = parseInt(bookData[selectedCode].pages);
            
                    dynamicInputBoxes.innerHTML = ""; // Clear existing input boxes
            
                    if (pagesValue === 128) {
                        var numInputBoxes = 4;
                    } else if (pagesValue === 64) {
                        var numInputBoxes = 2;
                    } else if (pagesValue === 96) {
                        var numInputBoxes = 3;
                    } else if (pagesValue === 160) {
                        var numInputBoxes = 5;
                    } else if (pagesValue === 192) {
                        var numInputBoxes = 6;
                    } else if (pagesValue === 224) {
                        var numInputBoxes = 7;
                    } else if (pagesValue === 256) {
                        var numInputBoxes = 8;
                    } else if (pagesValue === 288) {
                        var numInputBoxes = 9;
                    } else if (pagesValue === 320) {
                        var numInputBoxes = 10;
                    } else {
                        var numInputBoxes = 0;
                    }
            
                    for (var i = 1; i <= numInputBoxes; i++) {
                        var inputBox = document.createElement("input");
                        inputBox.type = "number";
                        inputBox.className = "form-control mobile";
                        inputBox.name = "form" + i;
                        inputBox.id = "rec_" + i;
                        inputBox.maxLength = "10";
                        inputBox.placeholder = "Form" + i;
                        inputBox.required = true;
                        inputBox.style.marginTop = "3%";
                        inputBox.style.width = "49%";
            
                        dynamicInputBoxes.appendChild(inputBox);
                    }
                }
            
                // Add an event listener to handle changes in the "code" input field
                codeDropdown.addEventListener('input', function () {
                    const enteredCode = this.value;
                    if (bookData[enteredCode]) {
                        // Populate other fields based on the entered code
                        brandDropdown.value = bookData[enteredCode].brand;
                        classDropdown.value = bookData[enteredCode].class;
                        mediumDropdown.value = bookData[enteredCode].medium;
                        subjectDropdown.value = bookData[enteredCode].subject;
                        pagesDropdown.value = bookData[enteredCode].pages;
            
                        // Update dynamic input boxes
                        updateInputBoxes();
                    }
                });
            
                // Add an event listener to handle changes in the "pages_1" dropdown
                pagesDropdown.addEventListener("change", updateInputBoxes);
            
                // Trigger the initial calls
                codeDropdown.dispatchEvent(new Event('input'));
            </script>
            



            <script>
                // Function to dynamically add or remove boxes based on selected page count
            function updateAdditionalBoxes(pageCount) {
                var additionalBoxesContainer = document.getElementById('additional_boxes');
                additionalBoxesContainer.innerHTML = ''; // Clear existing boxes

                var numberOfBoxes = Math.ceil(pageCount / 32); // 32 pages per box
                for (var i = 1; i <= numberOfBoxes; i++) {
                    var boxInput = document.createElement('input');
                    boxInput.type = 'number';
                    boxInput.className = 'form-control mobile';
                    boxInput.name = 'form' + i;
                    boxInput.id = 'additional_box_' + i;
                    boxInput.maxlength = '10';
                    boxInput.placeholder = 'Form ' + i;
                    boxInput.required = true;
                    boxInput.style.marginLeft = '3%';
                    
                    additionalBoxesContainer.appendChild(boxInput);
                }
            }

            // Add event listener to the "Pages" dropdown
            document.getElementById('pages_1').addEventListener('change', function () {
                var selectedPageCount = parseInt(this.value); // Get selected page count
                updateAdditionalBoxes(selectedPageCount);
            });

             </script>
            


            <!-- <script>
                // Function to dynamically add or remove boxes based on selected page count
function updateAdditionalBoxes(pageCount) {
    var additionalBoxesContainer = document.getElementById('additional_boxes');
    additionalBoxesContainer.innerHTML = ''; // Clear existing boxes

    var numberOfBoxes = Math.ceil(pageCount / 32); // 32 pages per box
    for (var i = 1; i <= numberOfBoxes; i++) {
        var boxInput = document.createElement('input');
        boxInput.type = 'number';
        boxInput.className = 'form-control mobile';
        boxInput.name = 'p_printing_received_form_' + i;
        boxInput.id = 'rec_' + i;
        boxInput.maxlength = '10';
        boxInput.placeholder = 'Received Form ' + i;
        boxInput.required = true;
        boxInput.style.marginLeft = '15%';
        
        additionalBoxesContainer.appendChild(boxInput);
    }
}

// Add event listener to the "Pages" dropdown
document.getElementById('pages_1').addEventListener('change', function () {
    var selectedPageCount = parseInt(this.value); // Get selected page count
    updateAdditionalBoxes(selectedPageCount);
});

            </script> -->



            

            



            <script>
              $(document).ready(function() {
               var max_fields_limit= 51;
               var x = 1;
               $('.add_more_button').click(function(e){ 
               e.preventDefault();
               $('#myDiv').show();
               if(x < max_fields_limit){ 
                   x++;  
                   $('.input_fields_container').append(
                       
                   //'<div class="form-group row" style="padding-left:0px; padding-right:10px;padding-top:20px;"><div class="col-md-2 form-group description"><input type="text" pattern="[a-z A-Z 0-9\s]+" class="form-control mobile" name="brand_name_'+x.toString()+'" id="brand_name_'+x.toString()+'" placeholder="brand name" value="" required maxlength="30" /></div><div class="col-md-2 form-group "><input type="text" class="form-control mobile" name="class_name_'+x.toString()+'" id="class_name_'+x.toString()+'" maxlength="30" placeholder="Class Name" min=""  pattern="^[a-z A-Z 0-9]+$" value="" required /></div><div class="col-md-2 form-group description"><input class="form-control mobile" style="width:110%;"  name="medium_'+x.toString()+'" id="medium_'+x.toString()+'" type="text" maxlength="30" placeholder=" Medium" min=""  pattern="^[a-zA-Z0-9]+$" value="" required /></div><div class="col-md-2 form-group description"><input class="form-control mobile" style="width:110%;" name="subject_'+x.toString()+'" id="subject_'+x.toString()+'" placeholder="Subject" value="" required maxlength="30"></div><div class="col-md-2 form-group quantity"><input type="number" pattern="[0-9\s]+" class="form-control mobile"name="quantity_'+x.toString()+'" id="quantity_'+x.toString()+'" placeholder="Quantity" value="" required maxlength="30"/></div><div class="col-md-2 form-group rate"><input type="number" pattern="[a-zA-Z0-9\s]+" class="form-control mobile"name="rim_'+x.toString()+'" id="rim_'+x.toString()+'" placeholder="Rims" value="" maxlength="30"/></div><a href="#" class="remove_field col-md-12" style="margin-left:10px; text-align:right;">Remove</a></div>'); //add input field
                       // <input type="text" class="form-control mobile" name="amount_'+x.toString()+'" id="amount_'+x.toString()+'" placeholder="Amount" value="" required />
                    '<div class="form-group row" style="padding-left:0px; padding-right:10px;padding-top:20px;"><div class="col-md-2 form-group description">   <select class="form-control mobile" style="width:20%%;" name="brand_name_'+x.toString()+'" id="brand_name_'+x.toString()+'" required><option disabled selected value>Select Brand</option>{% for i in book %}<option>{{i.books_name}}</option>{% endfor %}</select>     </div><div class="col-md-2 form-group ">   <select class="form-control mobile" style="width:20%%;" name="class_name_'+x.toString()+'" id="class_name_'+x.toString()+'" required><option disabled selected value>Select Class</option>{% for i in book %}<option>{{i.books_class}}</option>{% endfor %}</select>     </div><div class="col-md-2 form-group description">    <select class="form-control mobile" style="width:20%%;" name="medium_'+x.toString()+'" id="medium_'+x.toString()+'" required><option disabled selected value>Select Medium</option>{% for i in book %}<option>{{i.medium}}</option>{% endfor %}</select>      </div><div class="col-md-2 form-group description">   <select class="form-control mobile" style="width:20%%;" name="subject_'+x.toString()+'" id="subject_'+x.toString()+'" required><option disabled selected value>Select Subject</option>{% for i in book %}<option>{{i.subject}}</option>{% endfor %}</select>   </div><div class="col-md-2 form-group quantity"><input type="number" pattern="[0-9\s]+" class="form-control mobile"name="quantity_'+x.toString()+'" id="quantity_'+x.toString()+'" placeholder="Quantity" value="" required maxlength="30"/></div><div class="col-md-2 form-group rate"><input type="number" pattern="[a-zA-Z0-9\s]+" class="form-control mobile"name="rim_'+x.toString()+'" id="rim_'+x.toString()+'" placeholder="Rims" value="" maxlength="30"/></div><a href="#" class="remove_field col-md-12" style="margin-left:10px; text-align:right;">Remove</a></div>'); //add input field

                   }
     
     
           });  
           $('.input_fields_container').on("click",".remove_field", function(e){ //user click on remove text links
               e.preventDefault(); $(this).parent('div').remove(); x--;
              
           })
       });
     
     
       function restrictMinus(e) {
               var inputKeyCode = e.keyCode ? e.keyCode : e.which;
     
               if (inputKeyCode != null) {
                   if (inputKeyCode == 45) e.preventDefault();
               }
       }
     
       </script>

<script>
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the button that opens the modal
  var btn = document.getElementById("myBtn");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks the button, open the modal 
  btn.onclick = function() {
      modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
      modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
      if (event.target == modal) {
      modal.style.display = "none";
      }
  }

  </script>





  <script>
    document.getElementById("from_date").onchange = function () {
    var input = document.getElementById("to_date");
    input.setAttribute("min", this.value);
  }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.29.2/sweetalert2.all.js"></script>
    <script type="text/javascript">
  
<script>
  $(document).ready(function() {
    $('#add-row').DataTable({
        dom: 'lBfrtip',
        "ordering": false,
        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
        buttons: [
           'excel', 'pdf', 'print'
        ],
        initComplete: function () {
        this.api().columns([2,3]).every( function () {
            var column = this;
            var select = $('<select multiple="multiple" id="column_id_' + column[0][0] + '"><option value=""></option></select>')
            
            .appendTo( $("#type_filter_" + column[0][0]).empty())
                
            .on( 'change', function () {

            var val = $(':selected', select).map(function(index, element) {
            return $.fn.dataTable.util.escapeRegex($(this).val());
            }).toArray().join('|');
                  
            column
                .search( val ? '^'+val+'$' : '', true, false )
                .draw();
            } );

            column.data().unique().sort().each( function ( d, j ) {
                select.append( '<option value="'+d+'">'+d+'</option>' )
            });
        });        
      }
    });

    $("#column_id_2").select2({
      placeholder:" Select Date",
      closeOnSelect: true,
      width: '90%',
    })

    $("#column_id_3").select2({
      placeholder:" Select Number",
      closeOnSelect: true,
      width: '80%',
    })

  });
</script>





<script>
    $(function () {
        $('.deleteBtn').on('click', function (e) {
            e.preventDefault();
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, Delete it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    var id = $(this).attr("data-id");
                    $.ajax({
                        type: "POST",
                        url: "/delete-orders/" + id + "/" ,
                        data: { csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value },
                        success: function (response) {
                            Swal.fire(
                                'Deleted!',
                                'Bill deleted successfully.',
                                'success',
                                {
                                    allowOutsideClick: false,
                                    allowEscapeKey: false,
                                })
                                .then(function () {
                                    location.reload();
                                });
                        },
                        error: function () {
                            Swal.fire({
                                icon: "error",
                                title: "Oops...",
                                text: "Something went wrong!",
                                confirmButtonClass: "btn-success",
                                allowOutsideClick: false,
                                allowEscapeKey: false
                            })
                                .then(function () {
                                    location.reload();
                                });
                        }
                    });
                }
            })
        });
    });
    
    </script>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Function to update the options of a dropdown based on the selected values of dependent fields
        function updateDropdownOptions(dropdownId, dependentFields) {
        var dropdown = document.getElementById(dropdownId);
        var selectedOptions = [];
    
        // Get the selected values of the dependent fields
        for (var i = 0; i < dependentFields.length; i++) {
            var fieldId = dependentFields[i];
            var fieldValue = document.getElementById(fieldId).value;
            selectedOptions.push(fieldValue);
        }
    
        // Update the options of the dropdown based on the selected values
        for (var i = 0; i < dropdown.options.length; i++) {
            var option = dropdown.options[i];
            var dependsOnBrand = option.getAttribute('data-depends-on-brand');
            var dependsOnClass = option.getAttribute('data-depends-on-class');
            var dependsOnMedium = option.getAttribute('data-depends-on-medium');
            var dependsOnSubject = option.getAttribute('data-depends-on-subject');
            var dependsOnPages = option.getAttribute('data-depends-on-pages');
    
            // Check if the option should be displayed based on the selected values
            if (
            (!dependsOnBrand || dependsOnBrand === selectedOptions[0]) &&
            (!dependsOnClass || dependsOnClass === selectedOptions[1]) &&
            (!dependsOnMedium || dependsOnMedium === selectedOptions[2]) &&
            (!dependsOnSubject || dependsOnSubject === selectedOptions[3]) &&
            (!dependsOnPages || dependsOnPages === selectedOptions[4])
            ) {
            option.style.display = '';
            } else {
            option.style.display = 'none';
            }
        }
        }
    
        // Add event listeners to the dependent fields to update the dropdown options
        document.getElementById('brand_name_1').addEventListener('change', function () {
        updateDropdownOptions('class_name_1', ['brand_name_1']);
        });
    
        document.getElementById('class_name_1').addEventListener('change', function () {
        updateDropdownOptions('medium_1', ['brand_name_1', 'class_name_1']);
        });
    
        document.getElementById('medium_1').addEventListener('change', function () {
        updateDropdownOptions('subject_1', ['brand_name_1', 'class_name_1', 'medium_1']);
        });
    
        document.getElementById('subject_1').addEventListener('change', function () {
        updateDropdownOptions('pages_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1']);
        });
    
        document.getElementById('pages_1').addEventListener('change', function () {
        updateDropdownOptions('single_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1', 'pages_1']);
        updateDropdownOptions('double_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1', 'pages_1']);
        updateDropdownOptions('four_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1', 'pages_1']);
        });
    
        document.getElementById('single_1').addEventListener('change', function () {
        updateDropdownOptions('double_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1', 'pages_1']);
        });
    
        document.getElementById('double_1').addEventListener('change', function () {
        updateDropdownOptions('four_1', ['brand_name_1', 'class_name_1', 'medium_1', 'subject_1', 'pages_1']);
        });
    </script>










<script>
  flatpickr("#date", {
    dateFormat: "d-m-Y",
    altInput: true,
    altFormat: "F j, Y",
    allowInput: true,
    maxDate: "today"
  });
</script>




<script>
    $(document).ready(function() {
        // Function to sort the dropdown options numerically
        function sortDropdownOptions(selectElement) {
            var options = selectElement.find('option');
            var selectedValue = selectElement.val();
            
            options.sort(function(a, b) {
                return parseInt($(a).val()) - parseInt($(b).val());
            });
            
            selectElement.empty().append(options);
            selectElement.val(selectedValue);
        }
        
        // Call the sortDropdownOptions function for your specific dropdown
        sortDropdownOptions($('#class_name_1'));
    });
</script>
 



</body>
</html>
{% endblock %}